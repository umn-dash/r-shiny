<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>R Shiny: R Shiny--The First Floor (Rendering, Inputs, and Reactivity)</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/shiny_3.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      R Shiny
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            R Shiny
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  R Shiny
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 29%" class="percentage">
    29%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 29%" aria-valuenow="29" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/shiny_3.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="shiny_1.html">1. Web development 101</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="shiny_2.html">2. R Shiny--The Ground Floor</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        3. R Shiny--The First Floor (Rendering, Inputs, and Reactivity)
        </span>
      
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="shiny_4.html">4. DTs and Leaflets and Plotlys, Oh my!</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="shiny_2.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="shiny_4.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="shiny_2.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: R Shiny--The Ground
        </a>
        <a class="chapter-link float-end" href="shiny_4.html" rel="next">
          Next: DTs and Leaflets and...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>R Shiny--The First Floor (Rendering, Inputs, and Reactivity)</h1>
        <p>Last updated on 2024-07-11 |

        <a href="https://github.com/carpentries/r_shiny_workshop/edit/main/episodes/shiny_3.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How do I put cool stuff into my app?</li>
<li>How do I give my users meaningful things to do with my app?</li>
<li>How do I code my app to respond to my user’s actions?</li>
<li>How do I give my user greater control over when/how my app responds
to their actions?</li>
<li>How do I give myself greater control over when/how my app responds
to user actions?</li>
<li>How is build R Shiny server code perhaps quite different than any
coding I’ve done before?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Build a table to display in our app’s UI.</li>
<li>Allow our users to adjust how the table appears in real time.</li>
<li>Give the users greater control over when the table’s appearance is
adjusted.</li>
<li>Define the terms reactive context, event, handling, declarative
coding, and imperative coding. Be able to relate them to coding in R
Shiny.</li>
<li>Explain how and why R Shiny server-side code executes differently
than traditional R code.</li>
<li>Use isolation and observers to achieve greater control over event
handling.</li>
<li>Expand our UI’s “real estate” by introducing a set of tabs.</li>
</ul></div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="going-from-nothing-to-something">Going from nothing to something<a class="anchor" aria-label="anchor" href="#going-from-nothing-to-something"></a></h3>
<p>As we saw at the end of the previous lesson, if you start your app
now, it won’t look like much—just a title on an otherwise empty page. In
this lesson, we’ll fix that! As we add content, we’ll learn three core
concepts: 1) <strong>rendering</strong> and <strong>outputting</strong>
UI elements, 2) <strong>input widgets</strong>, and 3)
<strong>reactivity</strong>.</p>
<p>We’re going to create an app showcasing the <code>gapminder</code>
data set, which contains population, life expectancy, and economic data
over time for most countries. The goal will be to give users several
interesting ways to interactively engage with those data.</p>
<p>Let’s start by giving them a table with which to view the data. Given
that a table is just several boxes (cells) within larger boxes (rows and
columns), it makes sense that a table structure can be built using HTML,
although it can require a LOT of boxes!</p>
<p>Fortunately, we don’t have to “draw” all those boxes “by hand;” we
can have R do it. To insert an element into our UI that is complex
enough to build that using a programming language like R to build it for
us is appealing, we must:</p>
<ol style="list-style-type: decimal"><li><p>Make (<em>i.e.</em>, <em>render</em>) that element on the server
side of our app.</p></li>
<li><p>Then pass it to the UI side, where it can be translated into
(<em>i.e.</em>, <em>outputted as</em>) the equivalent HTML
element(s).</p></li>
</ol><p>For virtually every such complex element you’d want to build in R
Shiny, there is a pair of functions designed to do those two steps. In
this particular case, that pair with be <code>renderTable({})</code> on
the server side and <code>tableOutput()</code> on the UI side. [Notice
that most Shiny functions follow a camelCase <strong>naming
convention</strong>.]</p>
<p>Let’s use these two functions to add a basic table of the
<code>gapminder</code> data set to our app:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##Place this code INSIDE your app's server function INSIDE your server.R file! </span></span>
<span></span>
<span><span class="co">###TABLE</span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">basic_table</span> <span class="op">=</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">gap</span> <span class="co">#&lt;--OR WHATEVER YOU NAMED THIS OBJECT IN GLOBAL.R</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre>
</div>
<p>In the code above, we instruct R to render an “HTML-ready” version of
a table containing the entire gapminder data set. If we wanted to do any
operations on this data set first (such as filtering it or adding
columns to it), we could have done those using “normal” R code inside
<code>renderTable({})</code>’s braces. So long as it’s a table, the last
thing produced or referenced inside the braces is what will be passed
over to the UI. Here, we just want to pass over the raw data set, so
that’s all we put inside the braces.</p>
<p><em>How</em> this table is passed from the server to the UI, though,
is worth highlighting! In the previous lesson, recall that the app
creates an object called <code>output</code> as soon as the app starts
running. The task of passing rendered elements from the server side of
the app to the client side is what <code>output</code> is for. We just
need to give the element a nickname (an <code>outputId</code>) and stick
the element to the <code>output</code> object using that nickname plus
the <code>$</code> operator, and the app will do the “passing” for us!
Here, the nickname I provided was <code>basic_table</code>.</p>
<p>The only other thing the app needs to know now is <em>where</em> it
should put this rendered table in the app’s UI. We can tell it that
using our placement of the <code>tableOutput()</code> call in our UI
code:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="do">##This code should **replace** the "main" fluidRow() contained within the BODY section of your ui.R file!</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="do">##... other UI code...</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="fu">fluidRow</span>(</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  <span class="fu">column</span>(<span class="at">width =</span> <span class="dv">4</span>),</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="fu">column</span>(<span class="at">width =</span> <span class="dv">8</span>,</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>         <span class="fu">tableOutput</span>(<span class="st">"basic_table"</span>)<span class="co">#&lt;--PUTTING OUR RENDERED TABLE INTO OUR "MAIN PANEL" CELL.</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>         )</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>),</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="do">##... other UI code...</span></span></code></pre>
</div>
<p>Here, we’ve placed our outputted table inside the “main panel” of our
central, two-column <code>fluidRow()</code>.</p>
<p>As you can imagine, we could want to display multiple tables in a
single app. How would the app know <em>which</em> table should be
displayed <em>where</em>? Well, <code>tableOutput()</code> takes, as its
first input, the <code>outputId</code> of the table that should be
displayed in that location, so we can use the <code>outputId</code>s we
pick when writing our server code to keep our outputs straight in our UI
code.</p>
<p>If you run your app at this point, you should get something that
looks like this:</p>
<figure><img src="fig/clipboard-2809425075.png" class="figure mx-auto d-block"></figure><p>Which is cool! But also not <em>terribly</em> exciting…it looks a
little drab, and users can’t actually <strong>do</strong> anything with
this table except look at it. The first problem we’ll fix later by
swapping this table out for a much better one. However, we can fix the
second problem now.</p>
</div>
<div class="section level3">
<h3 id="giving-your-users-input">Giving your users input<a class="anchor" aria-label="anchor" href="#giving-your-users-input"></a></h3>
<p>The value of Shiny apps is often measured by much they let users
<em>do</em>. To enable meaningful user interactions, we need to add
<strong>widgets</strong> to our app. A widget is any element a user can
interact with in such a way that the app might be coded to respond to.
In web development, a user action that a webpage can watch for is called
an <strong>event</strong>; responding to an event (or choosing not to
respond!) is called <strong>handling</strong> it.</p>
<p>We’re going to give our users a way to interact meaningfully with our
table by adding an <strong>input widget</strong> to our UI. Then, we’re
going to tell our app how to <strong>handle</strong> any user
interactions with that widget by adding some <em>reactive</em> code to
our <code>server.R</code> file.</p>
<p>Let’s start by adding the input widget: We’ll add a
<code>selectInput()</code> call to our “sidebar” container in our UI.
This call will produce a “drop-down menu” style element that will allow
users to select a single choice from a pre-defined list. Specifically,
we’ll fill that list with the names of the columns in our
<code>gapminder</code> data set:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##This code should **replace** the "main" fluidRow() contained within the BODY section of your ui.R file!</span></span>
<span></span>
<span><span class="co">##... other UI code...</span></span>
<span></span>
<span><span class="co">###SIDEBAR CELL</span></span>
<span>    <span class="fu">column</span><span class="op">(</span></span>
<span>      width <span class="op">=</span> <span class="fl">4</span>,</span>
<span>      <span class="co">##ADDING A DROP-DOWN MENU WIDGET TO THE SIDEBAR.</span></span>
<span>      <span class="fu">selectInput</span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="st">"sorted_column"</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Select a column to sort the table by."</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu">names</span><span class="op">(</span><span class="va">gap</span><span class="op">)</span> <span class="co">#&lt;--OR WHATEVER YOU NAMED THIS OBJECT IN GLOBAL.R</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  </span>
<span><span class="co">##... other UI code...</span></span></code></pre>
</div>
<p>Notice that we had to provide <code>selectInput()</code> with three
inputs:</p>
<ol style="list-style-type: decimal"><li><p>An <code>inputId</code> is both an <code>id</code> for the
purposes of CSS and a nickname the app will use for this widget
server-side. We’ll see how that works in a minute.</p></li>
<li><p>The text we provide to <code>label</code> will be the text that
accompanies the widget in the UI and, usually, explains to the user what
the widget does (if it isn’t obvious).</p></li>
<li><p>For <code>choices</code>, we provide a vector of values that will
be the options that appear in our drop-down menu and that users can
choose from.</p></li>
</ol><p>While there are a few variations on this theme, most R Shiny input
widgets work a lot like <code>selectInput()</code>, so it’s a good first
example.</p>
<p>Now, our app should look like this:</p>
<figure><img src="fig/clipboard-2231599893.png" class="figure mx-auto d-block"></figure><p>Very nice!</p>
<p>…Except for two things. First, the choices in the drop-down menu are
a little…ugly. They look <em>exactly</em> like the names of the columns
in our data set, which are not very human readable in the sense that
they are abbreviations that lack spaces between words and also lack
capital letters.</p>
<p>How could we fix this? Well, we <em>could</em> rename the columns in
the data set, but while column names in R <em>can</em> contain spaces,
at best, it’s hard to make that work. Plus, longer and more complex
names require more typing.</p>
<p>Instead, we can provide a <strong>named vector</strong> to
<code>choices</code>. The names we give (those to the left of the
<code>=</code> operator) will be what gets displayed in the drop-down
menu, whereas the original column names (those to the right of the
<code>=</code>) will be what the server side of our app works with:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##This code should **replace** the "main" fluidRow() contained within the BODY section of your ui.R file!</span></span>
<span></span>
<span><span class="co">##... other UI code...</span></span>
<span></span>
<span><span class="co">###SIDEBAR CELL</span></span>
<span>    <span class="fu">column</span><span class="op">(</span></span>
<span>      width <span class="op">=</span> <span class="fl">4</span>,</span>
<span>      <span class="fu">selectInput</span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="st">"sorted_column"</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Select a column to sort the table by."</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu">c</span><span class="op">(</span></span>
<span>          <span class="co">#BY USING A NAMED VECTOR, WE CAN HAVE HUMAN-READABLE CHOICES AND COMPUTER-READABLE VALUES. TYPE CAREFULLY HERE!</span></span>
<span>          <span class="st">"Country"</span> <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>          <span class="st">"Continent"</span> <span class="op">=</span> <span class="st">"continent"</span>,</span>
<span>          <span class="st">"Year"</span> <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>          <span class="st">"Life expectancy"</span> <span class="op">=</span> <span class="st">"lifeExp"</span>,</span>
<span>          <span class="st">"Population size"</span> <span class="op">=</span> <span class="st">"pop"</span>,</span>
<span>          <span class="st">"GDP per capita"</span> <span class="op">=</span> <span class="st">"gdpPercap"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  </span>
<span><span class="co">##... other UI code...</span></span></code></pre>
</div>
<p>With that change made, our drop-down menu widget should be looking
much better! Except it doesn’t actually <em>do</em> anything…yet. We’ve
created something a user can interact with, triggering
<strong>events</strong>, but we haven’t told the app how to
<strong>handle</strong> those events yet.</p>
</div>
<div class="section level3">
<h3 id="rll-handle-that">R’ll handle that<a class="anchor" aria-label="anchor" href="#rll-handle-that"></a></h3>
<p>Let’s do that next. We’ll give the user the ability to sort the table
by the column they’ve selected by using the <code>dplyr</code> verb
<code>arrange()</code>. You might be surprised to learn that this is
actually quite straightforward in this particular case:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##This code should **replace** the renderTable({}) call contained within your server.R file!</span></span>
<span></span>
<span><span class="co">###BASIC GAPMINDER TABLE</span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">basic_table</span> <span class="op">=</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">gap</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co">#USE dplyr's arrange() VERB FOR SORTING ACCORDING TO THE PICKED COLUMN.</span></span>
<span>    <span class="fu">arrange</span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu">sym</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">sorted_column</span><span class="op">)</span><span class="op">)</span> <span class="co">#!! (PRONOUNCED "BANG-BANG") AND sym() ARE OBSCURE R TRICKS, NOT R SHINY THINGS. LET'S NOT WORRY ABOUT WHAT THEY DO.</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre>
</div>
<p>##This code should **replace** the renderTable({}) call contained
within your server.R file!</p>
<p>Earlier, we met the <code>output</code> object, which exists to pass
rendered entities from the server to the UI where they can be seen by
the user. Here, we meet the <code>input</code> object, which exists to
pass user inputs from the UI to the server where they can be responded
to.</p>
<p>In this instance, <code>input</code> is passing (<em>all the time
forever!</em>) the <strong>current</strong> value of the widget with the
<code>inputId</code> <code>sorted_column</code> (that’s the nickname I
gave our drop-down menu when I created it) over to the server. Our
server code can then use that value to influence how it builds our
table, such as how it sorts it.</p>
<p>But it’s fancier than that! R Shiny knows that, <em>at any
moment</em>, <code>input$sorted_column</code>’s value could
<em>change</em>. Objects with user-changeable values are called
<strong>reactive objects</strong>—at any moment, they might change
<em>in reaction to</em> what a user is doing.</p>
<p>So, because we’ve used <code>input$sorted_column</code> in some of
our server code, and because R knows that
<code>input$sorted_column</code>’s value could change at any time, it
knows to be <em>watching</em> for such changes.</p>
<p>Whenever it sees one, it runs whatever code involves
<code>input$sorted_column</code> <em>again</em>. The logic of this makes
sense, when you think about it: If <code>input$sorted_column</code> has
changed, anything that used its <em>previous</em> value may now be
“outdated,” so it’d be good to <em>re-run</em> <em>all</em> the
associated code and produce more current outputs!</p>
<p>Run the app and try it out. As you select different columns using the
drop-down menu, the table <em>automatically</em> rebuilds, sorted by the
column you’ve picked most recently. Because the code inside
<code>renderTable({})</code> contains <code>input$sorted_column</code>,
all that code reruns every time <code>input$sorted_column</code>
changes, which happens every time the user selects a new column from the
drop-down menu. We’re successfully <em>handling</em> the <em>events</em>
triggered by our user’s interactions with our input widget!</p>
</div>
<div class="section level3">
<h3 id="reactivity">Reactivity<a class="anchor" aria-label="anchor" href="#reactivity"></a></h3>
<p>There is just one small and technical but important detail: Our
server code <em>can’t</em> watch for changes in the values of
<strong>reactive objects</strong> just anywhere—it can <em>only</em> do
so within so-called <strong>reactive contexts</strong>.</p>
<p>A reactive context is a code block that R <em>knows</em> it needs to
watch and might need to run over and over (or never!). It makes sense
that we can only put changeable objects inside code blocks that R knows
it needs to be watching for such changes!</p>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge1"></a>
</h3>
<div class="callout-content">
<p><strong>Try it:</strong> Pause here to prove the previous point. Copy
<code>input$sorted_column</code> and paste it anywhere <em>inside</em>
your server function but <em>outside</em> of
<code>renderTable({})</code>. Then, try running your app. It should
<strong>immediately</strong> crash! Notice the R error in your R Console
when this happens and rephrase it in your own words.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>You’ll get an error that looks a lot like this:<br><br>
Error in $: Can’t access reactive value ‘sorted_column’ outside of
reactive consumer. ℹ Do you need to wrap inside reactive() or
observe()?</p>
<p>This error notes that <code>input$sorted_column</code> is a
<strong>reactive object</strong> (to be technical, a sub-type called a
reactive value) and that you’ve tried to reference it outside of a
reactive context, where R would actually be “prepared” to watch it.</p>
</div>
</div>
</div>
</div>
<p>How can we recognize a reactive context so we know where we can and
can’t put entities like <code>input$sorted_column</code>?</p>
<p><em>Generally speaking</em>, when an R Shiny server-side function
takes, as an input, an <em>expression</em> bounded by curly braces (
<code>{}</code> ), everything inside those curly braces becomes a
reactive context.</p>
<p>Maybe you’ve noticed the curly braces in <code>renderTable({})</code>
and wondered what they’re for. <em>The main input to every
<code>render*()</code> function is an <strong>expression</strong> for
creating a <strong>reactive context</strong>!</em></p>
<p>That means R <em>assumes</em> that every complex element we render in
our server might need to be <em>re-rendered</em> because the user
changed or did something. We provided <code>renderTable({})</code> with
a set of instructions that included what to do to <em>handle</em>
changing values of <code>input$sorted_column</code> and
<code>renderTable({})</code> handles (literally) the rest.</p>
</div>
<div class="section level3">
<h3 id="how-r-shiny-differs-from-normal-r">How R Shiny differs from “normal R”<a class="anchor" aria-label="anchor" href="#how-r-shiny-differs-from-normal-r"></a></h3>
<p>You’re hopefully realizing how coding in R Shiny is different from
coding in “normal R” in some key ways.</p>
<p>For many regular R users, the “nestedness” of the code in a UI file
probably feels pretty foreign (it should—we’re basically writing HTML
code there!).</p>
<p>Meanwhile, on the server side, having to imagine and design ways a
user might interact with our app and then coding instructions for how
the app should respond, no matter when or under what circumstances, is
probably also foreign-feeling.</p>
<p>It should—R Shiny server code is <em>not</em> like normal R code! In
fact, it’s an entirely different <em>paradigm</em> of programming.</p>
<p>Normal R code is generally executed <strong>imperatively</strong>.
That is, it is run from the first command to the last as fast as
possible as soon as we (the user) hit “run.”</p>
<p>Server-side Shiny code, meanwhile, is generally executed
<strong>declaratively</strong>. That is, it generally runs once when the
app starts up (or not), but, after that, it never runs again
<em>unless</em> and <em>until</em> it is <em>triggered</em> to run by
one or more specific <strong>events</strong>. [This is true when R is
deciding which reactive contexts to run when; however, the normal R code
<em>within</em> those contexts will still run imperatively, once that
reactive context begins running.]</p>
<p>These two different paradigms can be understood better via an
analogy: Imagine you are in a sandwich shop ordering a sandwich. You
probably expect that the employees of the shop will begin making your
sandwich as soon after you place your order as possible, using
instructions and supplies their manager gave them.</p>
<p>In that analogy, the relationship between you and the shop is
<strong>imperative</strong>; you aive a “command” and the sandwich shop
“executed” that command as quickly as it could manage via a pre-defined
set of steps.</p>
<p>Meanwhile, the relationship between the manager and their employees
is <strong>declarative</strong>. The manager can’t know which customers
will come on a given day, when they will show up, or which sandwiches
each will want. So, they can’t give their employees precise
“commands.”</p>
<p>Instead, they have to tell them to “watch for customers” and, when
those customers arrive and place orders (most, if not all, of which are
predictable ahead of time!), they should use a generalized set of
instructions to handle whatever orders have been placed.</p>
<p>As web developers, our relationship with our users is similar. We
can’t know who will show up when and what exactly they might decide to
do. However, we <em>can</em> anticipate common actions they might take,
give them desirable actions to take, and give the app detailed but
generalized enough instructions that it can take care of all those
different requests whenever (or if ever) they occur.</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion<a class="anchor" aria-label="anchor" href="#discussion1"></a>
</h3>
<div class="callout-content">
<p>Check for understanding: How does the code we’ve written so far in
our <code>server.R</code> file execute differently than code we’d write
in a traditional R script? How does the code inside of
<code>renderTable({})</code>’s braces differ from traditional R code we
might write?</p>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Server-side R code is often broken up into many reactive contexts,
each tasked with generating one or more complex UI elements and/or
handling user actions. Unlike traditional R code, much of this
server-side code runs when a user performs a triggering action, not when
an operator hits “enter,” so to speak.</p>
<p>Plus, server-side code is not always run from top to bottom; reactive
contexts will (re)-run based on user actions, not on placement within
the file. Plus, reactive contexts may be trigger to rerun multiple
times, or never, depending upon what actions a user does or does not
take.</p>
<p>Inside a reactive context, things are more traditional in that the
code inside a reactive context will run just once, from top to bottom,
as quickly as possible as soon as that context is triggered to (re)run.
However, these contexts may contain reactive objects (like
<code>input</code> sub-objects), and it’s changes in the values of these
objects that might cause reactive contexts to need to rerun to produce
more current outputs.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="buttoning-this-up">Buttoning this up<a class="anchor" aria-label="anchor" href="#buttoning-this-up"></a></h3>
<p>By this point, R now knows that:</p>
<ol style="list-style-type: decimal"><li><p>Users might select new columns in our input widget
(<strong>events</strong>),</p></li>
<li><p>It should watch out for any such events, and</p></li>
<li><p>If any occur, it should execute the <code>renderTable({})</code>
code again, which will re-generate the table in a way we’ve instructed
given whatever the user has selected.</p></li>
</ol><p>In this specific circumstance (a simple table regulated by users
through just one input widget), this setup is <em>probably</em> fine.
However, imagine users had several inputs widgets instead of just one.
If we used this same approach to handle events based on those inputs,
changing any one of the inputs would trigger the table-rendering code to
rerun and the table would be remade.</p>
<p>That may be an undesirable level of reactivity, for several reasons.
Users often expect to have some say in when exactly an app changes
states. Maybe they expect to be able to experiment with the inputs to
find the combination of selections they are most interested in
<em>before</em> the app responds. Maybe the table loads slowly, and the
user would rather not have to wait through the rebuilding process unless
they’re ready. Maybe they just want to be “in control” because they’d
find updating distracting when it doesn’t happen on <em>their</em>
terms.</p>
<p>Whatever the reason, we can easily give our users greater control
over our table by adding another input widget: an
<code>actionButton()</code>.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##This code should **replace** the "sidebar" content of our fluidRow() contained within the BODY section of your ui.R file!</span></span>
<span></span>
<span><span class="co">##... other UI code...</span></span>
<span></span>
<span><span class="co">###SIDEBAR CELL</span></span>
<span>    <span class="fu">column</span><span class="op">(</span></span>
<span>      width <span class="op">=</span> <span class="fl">4</span>,</span>
<span>      <span class="fu">selectInput</span><span class="op">(</span></span>
<span>        inputId <span class="op">=</span> <span class="st">"sorted_column"</span>,</span>
<span>        label <span class="op">=</span> <span class="st">"Select a column to sort the table by."</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu">c</span><span class="op">(</span></span>
<span>          <span class="st">"Country"</span> <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>          <span class="st">"Continent"</span> <span class="op">=</span> <span class="st">"continent"</span>,</span>
<span>          <span class="st">"Year"</span> <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>          <span class="st">"Life expectancy"</span> <span class="op">=</span> <span class="st">"lifeExp"</span>,</span>
<span>          <span class="st">"Population size"</span> <span class="op">=</span> <span class="st">"pop"</span>,</span>
<span>          <span class="st">"GDP per capita"</span> <span class="op">=</span> <span class="st">"gdpPercap"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="co">##ADD AN actionButton(). PAY CLOSE ATTENTION TO CHANGES IN COMMAS/PARENTHESES IN THIS REGION!</span></span>
<span>      <span class="fu">actionButton</span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"go_button"</span>, label <span class="op">=</span> <span class="st">"Go!"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  </span>
<span><span class="co">##... other UI code...</span></span></code></pre>
</div>
<p>This will add a simple, button-style input widget to our app’s
sidebar. It will say <code>Go!</code> on it (<code>label</code>), and
it’s current value (which is a number equal to the number of times it
has been pressed, or <code>NULL</code> if it hasn’t been pressed yet)
will be passed from the UI to the server at all times via
<code>input$go_button</code>.</p>
<p>Now, we need to tell R how to <strong>handle</strong> it when a user
presses our button (until then, pressing it won’t do anything!). In this
case, we want the table to update <em>only</em> whenever the button is
pressed (<em>i.e.</em>, whenever <code>input$go_button</code>
changes.</p>
<p>Here’s where we hit a little snag: <code>renderTable({})</code>’s
reactive context is “indiscriminate;” <em>any</em> change in
<em>any</em> reactive object it contains will trigger ithe reactive
context to rerun. So, simply adding <code>input$go_button</code> to that
reactive context will <em>not</em> prevent changes in
<code>input$sorted_column</code> from triggering a rerun. And we can’t
just remove <code>input$sorted_column</code> from the reactive context
because, then, we couldn’t use its value to decide how to sort the
column when we do remake the table. We’re stuck!</p>
<p>Thankfully, Shiny has a function for sticky situations like these:
<code>isolate()</code>. Wrapping any reactive object in
<code>isolate()</code> allows R to use its current value to do work but
prevents R from watching that object for changes.</p>
<p>So, we can implement our new table-rendering approach like this:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##This code should **replace** the renderTable({}) call contained within your server.R file!</span></span>
<span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">basic_table</span> <span class="op">=</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="co">#BY PLACING input$go_button IN THIS EXPRESSION (EVEN IF WE DON'T USE IT TO DO ANYTHING!), WE MAKE THIS EXPRESSION A REACTIVE CONTEXT. IF IT CHANGES, THIS EXPRESSION WILL RE-RUN. </span></span>
<span>  <span class="va">input</span><span class="op">$</span><span class="va">go_button</span></span>
<span>  </span>
<span>  <span class="co">#USING isolate() PREVENTS input$sorted_column FROM BEING REACTIVE (CHANGES TO IT WON'T BE HANDLED) BUT STILL ALLOWS US TO USE ITS CURRENT VALUE.</span></span>
<span>  <span class="va">gap</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">arrange</span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu">sym</span><span class="op">(</span><span class="fu">isolate</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">sorted_column</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span>  </span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre>
</div>
<p>Now, when users fiddle with our drop-down menu, nothing happens to
the table…<em>until</em> we press the button. At that point, iIf our
selection in our drop-down menu has changed since the last time the
button was pressed, the table will re-render.</p>
</div>
<div class="section level3">
<h3 id="being-observant">Being observant<a class="anchor" aria-label="anchor" href="#being-observant"></a></h3>
<p>This approach <em>works</em>, but it can get a little unwieldy if you
have <em>many</em> inputs that would need isolating. For situations like
those, where you would want the app to respond a certain way
<em>only</em> when a <em>specific</em> reactive object changes,
especially when that response needs to involve a bunch of other reactive
objects you <em>don’t</em> want being watched, we can make our event
handling considerably more precise using
<code>observeEvent({},{})</code>:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##This code should be **added to** your server.R file, after all other code but inside of your server function!</span></span>
<span></span>
<span><span class="co">#observeEvent({},{}) TAKES TWO EXPRESSIONS AS INPUTS. IT WATCHES THE FIRST AND, WHEN IT CHANGES, IT RESPONDS BY RE-RUNNING THE SECOND. </span></span>
<span><span class="co">#SO, THE FIRST IS REACTIVE, BUT THE SECOND IS NOT. </span></span>
<span><span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">go_button</span>, <span class="op">{</span> </span>
<span>  </span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">basic_table</span> <span class="op">=</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>    </span>
<span>    <span class="co">#WE DON'T NEED isolate() ANY MORE--THIS SECOND EXPRESSION IS NOT REACTIVE, SO CHANGES TO input$sorted_column WILL NOT TRIGGER THIS CODE BLOCK TO RUN.</span></span>
<span>  <span class="va">gap</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">arrange</span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu">sym</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">sorted_column</span><span class="op">)</span><span class="op">)</span> </span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre>
</div>
<p>Notice that I’m writing <code>observeEvent({},{})</code> using
<em>two</em> sets of braces. That’s because we give it, as inputs,
<em>two</em> expressions. However, interestingly, these have a specific
relationship:</p>
<ol style="list-style-type: decimal"><li><p>R <em>watches</em> <em>only</em> the <em>first</em> of these
expressions for changes (it’s the only <strong>reactive</strong>
<strong>expression</strong>).</p></li>
<li><p>R will only ever actually <em>execute</em> the <em>second</em> of
these expressions, and <em>only</em> in response to changes in the
<em>first</em> expression (changes to <code>input$sorted_column</code>
<em>aren’t</em> being watched because it’s in the second expression, not
the first). It’s as if the <em>entire</em> second expression is wrapped
in <code>isolate()</code>!</p></li>
</ol><p>So, <code>observeEvent({},{})</code> is the equivalent of telling R
“if <em>exactly</em> [first expression] changes, do <em>exactly</em>
[second expression],” which is often the level of precision we’ll want
when handling events in a Shiny app! It’s for this reason that I use
<code>observeEvent({},{}</code>s in large volumes in my own apps.</p>
</div>
<div class="section level3">
<h3 id="totally-tabular">Totally tabular<a class="anchor" aria-label="anchor" href="#totally-tabular"></a></h3>
<p>We now have all the conceptual tools we need to build a cool app! In
the last lesson, we’ll replace this table will a cooler one, and we’ll
add a map and graph. To keep all this organized, though, let’s add
<strong>tabs</strong> to our main content area, one for each of these
features.</p>
<p>We can do this using the R Shiny functions
<code>tabsetPanel()</code>, which is the container that holds all the
tabs, and <code>tabPanel()</code>, which holds the contents of a single
tab:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##This code should **replace** the "main panel" content of our fluidRow() contained within the BODY section of your ui.R file!</span></span>
<span></span>
<span><span class="co">##... other UI code...</span></span>
<span></span>
<span><span class="co">###MAIN PANEL CELL</span></span>
<span><span class="co">##NEST YOUR UI ELEMENTS HERE **CAREFULLY**!</span></span>
<span>    <span class="fu">column</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">8</span>, <span class="fu">tabsetPanel</span><span class="op">(</span></span>
<span>      <span class="co">###TABLE TAB</span></span>
<span>      <span class="fu">tabPanel</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Table"</span>, </span>
<span>               <span class="fu">tableOutput</span><span class="op">(</span><span class="st">"basic_table"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="co">###MAP TAB</span></span>
<span>      <span class="fu">tabPanel</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Map"</span>,</span>
<span>      <span class="co">###GRAPH TAB</span></span>
<span>      <span class="fu">tabPanel</span><span class="op">(</span></span>
<span>        title <span class="op">=</span> <span class="st">"Graph"</span>,</span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span></span>
<span><span class="co">##... other UI code...</span></span></code></pre>
</div>
<p>Now, if we look at our app, we’ll see that we have three tabs in our
main panel area with the <code>title</code>s we specified in our code.
We can swap between the tabs using each tab panel’s tab (yes, that is
awkward to say!) at the top, just like in a browser. The second and
third tab panels are empty for now, but we’ll soon fix that!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Complex UI elements, like tables and graphs, will first need to be
rendered in our server code and then placed within our UI’s structure
using an <code>*Output()</code> function of some kind.</li>
<li>Rendered entities that are ready for display are passed from the
server to the UI via the <code>output</code> object and the
<code>outputId</code>’s we give these objects when we render them.</li>
<li>Input widgets are UI elements that allow users to interact with our
app. The current values of these widgets are being constantly passed
from the UI to the server via the <code>input</code> object and the
<code>inputId</code>’s we give these widgets when we create them.</li>
<li>R knows to be watching reactive objects like those attached to
<code>input</code> for changes. Any such changes are called events.
Event handling is the process by which specific responses are coded to
specific events.</li>
<li>The primary way R Shiny handles events is by re-running any reactive
contexts that contain the reactive object that has changed, unless that
object is wrapped in <code>isolate()</code>.</li>
<li>In our server code, reactive contexts are triggered to run
directively (in response to user actions), not imperatively (triggered
to run by a coder hitting “run”). They might run in any order, or never,
depending upon what a user does. However, once a reactive context begins
running, it’s contents are run imperatively through to completion (even
if they take a long time!), during which time the app will be
unresponsive.</li>
<li>Observers (like <code>observeEvent({},{})</code>) build additional
reactive constructs within which we can handle events. In particular,
<code>observeEvent({},{})</code> allows for very precise event-handling
in that only changes to reactive objects provided to its first
expression trigger only the second expression to re-run.</li>
<li>
<code>tabPanel()</code> and <code>tabsetPanel()</code> allow you to
create a “tabular layout,” allowing you to divide up one space in your
UI into several, only one of which can be seen at one time.</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>



      </div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="shiny_2.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="shiny_4.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="shiny_2.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: R Shiny--The Ground
        </a>
        <a class="chapter-link float-end" href="shiny_4.html" rel="next">
          Next: DTs and Leaflets and...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries/r_shiny_workshop/edit/main/episodes/shiny_3.Rmd" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries/r_shiny_workshop/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries/r_shiny_workshop/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries/r_shiny_workshop/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.5" class="external-link">sandpaper (0.16.5)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.3" class="external-link">varnish (1.0.3)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://carpentries.github.io/r_shiny_workshop/shiny_3.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, r, The Carpentries",
  "name": "R Shiny--The First Floor (Rendering, Inputs, and Reactivity)",
  "creativeWorkStatus": "active",
  "url": "https://carpentries.github.io/r_shiny_workshop/shiny_3.html",
  "identifier": "https://carpentries.github.io/r_shiny_workshop/shiny_3.html",
  "dateCreated": "2024-07-10",
  "dateModified": "2024-07-11",
  "datePublished": "2024-07-12"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

