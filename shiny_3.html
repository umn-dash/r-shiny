<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>R Shiny: R Shiny's Core Concepts: Rendering and Outputting, Input Widgets, and Reactivity</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/shiny_3.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      R Shiny
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            R Shiny
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  R Shiny
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 32%" class="percentage">
    32%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 32%" aria-valuenow="32" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/shiny_3.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="shiny_1.html">1. Welcome to the Web! Web Development with Shiny 101</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="shiny_2.html">2. Building the Ground Floor of a Shiny App</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        3. R Shiny's Core Concepts: Rendering and Outputting, Input Widgets, and Reactivity
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#going-from-nothing-to-something">Going from nothing to something</a></li>
<li><a href="#giving-your-users-input">Giving your users input</a></li>
<li><a href="#how-r-shiny-differs-from-normal-r">How R Shiny differs from “normal R”</a></li>
<li><a href="#buttoning-this-up">Buttoning this up</a></li>
<li><a href="#being-observant">Being observant</a></li>
<li><a href="#totally-tabular">Totally tabular</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="shiny_4.html">4. Shiny Showstoppers: DTs and Leaflets and Plotlys, Oh My!</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="shiny_2.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="shiny_4.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="shiny_2.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Building the Ground
        </a>
        <a class="chapter-link float-end" href="shiny_4.html" rel="next">
          Next: Shiny Showstoppers:...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>R Shiny's Core Concepts: Rendering and Outputting, Input Widgets, and Reactivity</h1>
        <p>Last updated on 2024-09-05 |

        <a href="https://github.com/carpentries/r_shiny_workshop/edit/main/episodes/shiny_3.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How do I add cool features to my app?</li>
<li>How do I give my users meaningful things to do on my app?</li>
<li>How do I get my app to respond meaningfully to user actions?</li>
<li>How do I give users control over when/how my app responds?</li>
<li>How do I give <em>myself</em> control over when/how my app
responds?</li>
<li>How is R Shiny server code different than code I may have written
before?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Present data to users by adding a table to your UI.</li>
<li>Allow users to adjust how the table looks, and give them control
over when it changes.</li>
<li>Define <strong>reactive context</strong>, <strong>event</strong>,
<strong>event handling</strong>, <strong>declarative coding</strong>,
and <strong>imperative coding</strong>.</li>
<li>Explain how and why R Shiny server code executes differently than R
code.</li>
<li>Use <strong>isolation</strong> and <strong>observers</strong> to
control event handling.</li>
<li>Expand your UI’s “real estate” by adding a tab set panel.</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="going-from-nothing-to-something">Going from nothing to something<a class="anchor" aria-label="anchor" href="#going-from-nothing-to-something"></a></h2>
<hr class="half-width"><p>As we saw at the end of the last lesson, our app doesn’t look like
much…yet! It is just a title (and a footer, if you added one on your
own) on an otherwise empty page.</p>
<p>In this lesson, we’ll fix that! As we add content to our app’s UI,
we’ll learn three core concepts of using Shiny to build a website: 1)
<strong>rendering</strong> and <strong>outputting</strong> UI elements,
2) <strong>input widgets</strong>, and 3)
<strong>reactivity</strong>.</p>
<p>Our app will showcase the <code>gapminder</code> data set, which
contains population, life expectancy, and economic data over time for
most of the world’s countries:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap</span> <span class="op">=</span> <span class="va">gapminder</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'gapminder' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gap</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in eval(expr, envir, enclos): object 'gap' not found</code></pre>
</div>
<p>Our goal will be to give users interesting ways to engage with these
data. As we go, imagine how you might do the same for your own data
sets!</p>
<p>Let’s start by giving users a table with which to view the raw
<code>gapminder</code> data set.</p>
<p>If you think about it, a table is just a bunch of boxes (cells)
within larger boxes (rows and columns) all within one outermost box (the
table itself).</p>
<p>So, it makes sense that a table should be build-able in HTML, a
language <em>all about</em> nested boxes! However, depending on the
number of cells, it would require typing out a LOT of boxes to build
such a table from scratch in HTML.</p>
<p>Fortunately, we don’t have to; we can have R do it! To build an
element (like a table) complex enough that building it programmatically
instead of “by hand” is appealing, and then to insert that complex
element into our UI where a user can see it, we must:</p>
<ol style="list-style-type: decimal"><li>
<p>Make (<em>i.e.</em>, <strong>render</strong>) that element on the
server side of our app.</p>
<ul><li>This involves first doing whatever “heavy lifting” is needed to
assemble the underlying R object. For a table, <em>e.g.</em>, we might
use R to do some data manipulation, like joining two smaller tables
together.</li>
</ul></li>
<li><p>Then, we convert (behind the scenes) that R object into its
functional HTML equivalent, a process Shiny calls
<em>rendering</em>.</p></li>
<li><p>Lastly, we pass the rendered entity to the UI side. In the
process, we indicate <em>where</em> in our UI we’d like the finished
element to display, a process Shiny calls <em>outputting</em>.</p></li>
</ol><p>For virtually every complex element you’d want to build in Shiny,
there is a pair of functions designed to do those latter two steps. In
this case, that pair is <code>renderTable({})</code> on the server side
and <code>tableOutput()</code> on the UI side. [Notice that most Shiny
functions have camelCase names.]</p>
<p>Let’s use these two functions to add a basic table of the
<code>gapminder</code> data set to our app’s UI:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##Place this code INSIDE your app's server function INSIDE your server.R file! </span></span>
<span></span>
<span><span class="co">###TABLE</span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">basic_table</span> <span class="op">=</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">gap</span> <span class="co">#&lt;--OR WHATEVER YOU NAMED THIS DATA SET OBJECT IN YOUR GLOBAL.R</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre>
</div>
<p>Above, we told R to <strong>render</strong> an “HTML-ized” version of
the raw gapminder data frame. Because we wanted to render the raw data
set with no modifications, we put just the data frame’s name inside
<code>renderDT({})</code>’s braces. If we had wanted to do any
operations on this data set first (such as filtering it or adding
columns to it), though, we could have those operations using normal R
code inside those braces. So long as it’s a table-like object, the last
thing produced inside the braces is what gets rendered (placing anything
else last will trigger an error).</p>
<p>Once we have a rendered, HTML-ized table on the server side, how do
we pass it from the server to the UI? Remember that users only see what
the server instructs a user’s browser to build in the UI, so we must
tell R to “hand over” this rendered table to the UI
<em>somehow</em>…</p>
<p>Last lesson, recall that the app creates an object called
<code>output</code> when the app boots up. <u>Passing rendered elements
from the server to the UI is <code>output</code>’s job</u>. If an app is
like a restaurant, then rendering is the process of “cooking” elements
in the kitchen, and <code>output</code> is the waiter that brings
finished elements into the dining room where users/customers can
experience them.</p>
<p>For this to work, though, we need to give the rendered element a
nickname (an <code>outputId</code>). Then, we use that
<code>outputId</code> to “stick” the rendered element to
<code>output</code> using the <code>$</code> operator. Here, the
<code>outputId</code> we set was <code>basic_table</code>.</p>
<p>Now, we just need to code the equivalent of “dropping our prepared
element off at the right table.” We tell the app <em>where</em> to place
the element with our placement of the <code>tableOutput()</code> call in
our UI:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="do">##This code should **replace** the "main" fluidRow() contained within the BODY section of your ui.R file!</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="do">##... other UI code...</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="fu">fluidRow</span>(</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  <span class="do">###SIDEBAR CELL</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  <span class="fu">column</span>(<span class="at">width =</span> <span class="dv">4</span>),</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>  <span class="do">###MAIN PANEL CELL</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>  <span class="fu">column</span>(<span class="at">width =</span> <span class="dv">8</span>,</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>         <span class="fu">tableOutput</span>(<span class="st">"basic_table"</span>)<span class="co">#&lt;--PUTTING OUR RENDERED TABLE IN OUR "MAIN PANEL" CELL USING tableOutput(), WITH THE outputId OF THE RENDERED PRODUCT AS INPUT.</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>         )</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>),</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="do">##... other UI code...</span></span></code></pre>
</div>
<p>Here, we’ve placed our outputted table inside the “main panel”
cell.</p>
<p>Why do we need to use our <code>outputId</code> as the input for
<code>tableOutput()</code>? Wouldn’t it be enough to place an empty
<code>tableOutput()</code> call here? Well, a single app might render
and display many different tables. How would the app know <em>which</em>
table should be displayed <em>where</em>, if all it had to go on was
where <code>tableOutput()</code> calls were?</p>
<p>This ambiguity is cleared up by specifying the <code>outputId</code>
of the <em>specific</em> table we want displayed in a <em>specific</em>
location. In our restaurant analogy, the <code>outputId</code> is like
the order ticket the waiter filled out when a table ordered food.
<code>output</code> (our “waiter”) then uses that code later to figure
out which prepared food belongs to which tables.</p>
<p>If we run the app now, it should look like this:</p>
<figure><img src="fig/basic%20table.png" alt="Our Shiny app with our basic HTML table of the gapminder data set." class="figure mx-auto d-block"><div class="figcaption">Our Shiny app with our basic HTML table of the
gapminder data set.</div>
</figure><p>Our table is cool! But not <em>terribly</em> exciting…it looks a
little drab (and long!), and users can’t actually <strong>do</strong>
anything with it except look at it. The first problem we’ll fix later by
swapping it for a fancier one. However, we can fix the second problem
now.</p>
</section><section><h2 class="section-heading" id="giving-your-users-input">Giving your users input<a class="anchor" aria-label="anchor" href="#giving-your-users-input"></a></h2>
<hr class="half-width"><p>The value of a Shiny app can be measured in terms of how much it lets
users <em>do</em>. To enable meaningful user interactions, we can add
<strong>widgets</strong>. A widget is any element users can interact
with and thus provide data to the app that it could use to respond in
some way. In web development, user actions a webpage can watch for are
called <strong>events</strong>; responding to an event (or choosing to
not respond!) is called <strong>event</strong>
<strong>handling</strong>.</p>
<p>Let’s start by adding an <strong>input widget</strong> to our UI so
that new <strong>events</strong> are possible. Specifically, let’s add a
<code>selectInput()</code> to our “sidebar.” This will produce a
“drop-down menu”-style element that allows users to pick a choice from a
pre-defined list. We’ll populate the list with the column names from the
<code>gapminder</code> data set:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="do">##This code should **replace** the "sidebar" cell contained within the main fluidRow() of your ui.R file!</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="do">##... other UI code...</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="do">###SIDEBAR CELL</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    <span class="fu">column</span>(</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>      <span class="at">width =</span> <span class="dv">4</span>,</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>      <span class="do">##ADDING A DROP-DOWN MENU WIDGET TO THE SIDEBAR.</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>      <span class="fu">selectInput</span>(</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>        <span class="at">inputId =</span> <span class="st">"sorted_column"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">"Select a column to sort the table by."</span>,</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">names</span>(gap) <span class="co">#&lt;--OR WHATEVER YOU NAMED THIS OBJECT IN GLOBAL.R</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>      )</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>    ),</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>  </span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="do">##... other UI code...</span></span></code></pre>
</div>
<p>Notice we provided <code>selectInput()</code> three inputs:</p>
<ol style="list-style-type: decimal"><li><p>An <code>inputId</code> is both an <code>id</code> for CSS as
well as a nickname the app uses to pass this widget’s current value from
the UI to the server. We’ll see how that works in a minute.</p></li>
<li><p>The text we provide to <code>label</code> will accompany the
widget in the UI and, usually, should explain to the user what the
widget does (when it isn’t obvious).</p></li>
<li><p>For <code>choices</code>, we provide a vector of values that’ll
be the options in our drop-down menu.</p></li>
</ol><p>While there are a few variations, most Shiny input widgets work a lot
like <code>selectInput()</code>, so it’s a good first example.</p>
<p>Now, our app should look like this:</p>
<figure><img src="fig/select%20input.png" alt="Our new selectInput, drop-down-menu-style widget." class="figure mx-auto d-block"><div class="figcaption">Our new selectInput, drop-down-menu-style
widget.</div>
</figure><p>Very nice!</p>
<p>…<em>Except</em> for two things. First, the choices in the drop-down
menu are…ugly. Some are abbreviations that lack spaces between words and
some also lack capital letters.</p>
<p>How could we fix this? Well, we <em>could</em> rename the columns in
the data set, but while column names in R <em>can</em> contain spaces,
at best, it’s annoying. Plus, longer and more complex names require more
typing.</p>
<p>Instead, we can provide a <strong>named vector</strong> to
<code>choices</code>. The names we give (left of the <code>=</code>)
will be displayed in the drop-down menu, whereas the original column
names (right of the <code>=</code>) will be retained internally for the
app to use in operations:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="do">##This code should **replace** the "sidebar" cell contained within the main fluidRow() of your ui.R file!</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="do">##... other UI code...</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="do">###SIDEBAR CELL</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    <span class="fu">column</span>(</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>      <span class="at">width =</span> <span class="dv">4</span>,</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>      <span class="fu">selectInput</span>(</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>        <span class="at">inputId =</span> <span class="st">"sorted_column"</span>,</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">"Select a column to sort the table by."</span>,</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>          <span class="co">#BY USING A NAMED VECTOR, WE CAN HAVE HUMAN-READABLE CHOICES AND COMPUTER-READABLE VALUES. TYPE CAREFULLY HERE!</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>          <span class="st">"Country"</span> <span class="ot">=</span> <span class="st">"country"</span>,</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>          <span class="st">"Continent"</span> <span class="ot">=</span> <span class="st">"continent"</span>,</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>          <span class="st">"Year"</span> <span class="ot">=</span> <span class="st">"year"</span>,</span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>          <span class="st">"Life expectancy"</span> <span class="ot">=</span> <span class="st">"lifeExp"</span>,</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>          <span class="st">"Population size"</span> <span class="ot">=</span> <span class="st">"pop"</span>,</span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>          <span class="st">"GDP per capita"</span> <span class="ot">=</span> <span class="st">"gdpPercap"</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>        )</span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>      )</span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>    ),</span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a>  </span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a><span class="do">##... other UI code...</span></span></code></pre>
</div>
<p>With that change made, our drop-down menu widget is looking much
cleaner!</p>
<figure><img src="fig/prettier%20choices.png" alt="Now our choices look much more human-readable, but the original column names are preserved for work behind the scenes." class="figure mx-auto d-block"><div class="figcaption">Now our choices look much more human-readable,
but the original column names are preserved for work behind the
scenes.</div>
</figure><p>The more serious issue is that fiddling with the drop-down doesn’t
<em>do</em> anything…<em>yet</em>. We’ve created something a user can
interact with, triggering <strong>events</strong>, but we haven’t told
the app how to <strong>handle</strong> them yet.</p>
<div class="section level3">
<h3 id="rll-handle-that">R’ll handle that<a class="anchor" aria-label="anchor" href="#rll-handle-that"></a></h3>
<p>Let’s do that next. We’ll give users the ability to re-sort the table
by the column they’ve selected using our drop-down widget. This requires
only a modest adjustment to our server code:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##This code should **replace** the renderTable({}) call in your server.R file!</span></span>
<span></span>
<span><span class="co">###BASIC GAPMINDER TABLE</span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">basic_table</span> <span class="op">=</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">gap</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="co">#USE dplyr's arrange() TO SORT BY THE PICKED COLUMN.</span></span>
<span>    <span class="fu">arrange</span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu">sym</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">sorted_column</span><span class="op">)</span><span class="op">)</span> <span class="co">#!! (PRONOUNCED "BANG-BANG") AND sym() ARE dplyr HACKS HERE, NOT R SHINY THINGS. DON'T WORRY ABOUT WHAT THEY DO.</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre>
</div>
<p>Run the app and try it! As you select different columns using the
drop-down menu, the table <em>rebuilds</em>, sorted by the column you’ve
picked:</p>
<figure><img src="fig/sorting%20by%20column.gif" alt="Now, when a user selects a new column using the drop-down widget, the table is rebuilt, sorted by that column." class="figure mx-auto d-block"><div class="figcaption">Now, when a user selects a new column using the
drop-down widget, the table is rebuilt, sorted by that column.</div>
</figure><p>Earlier, we met <code>output</code>, which passes rendered elements
from the server to the UI. Here, we meet <code>input</code>, which
passes <strong>event data</strong> from the UI to the server. Here,
<code>input</code> is passing the <em>current</em> value of the widget
with the <code>inputId</code> of <code>sorted_column</code> over to the
server every time that value changes. Our server code can use that value
in operations, such as deciding how to sort the data in our rendered
table.</p>
<p>More importantly, though, Shiny knows that
<code>input$sorted_column</code>’s value could change <em>at any
moment</em>. Objects with values that could change as a result of events
are called <strong>reactive objects</strong>—at any time, they could
change <em>in reaction to</em> something the user did.</p>
<p>Because we’ve used <code>input$sorted_column</code> in some of our
server code, and because R knows that <code>input$sorted_column</code>’s
value could change at any time, Shiny knows to be <em>watching</em> for
such changes. Whenever it spots one, it’ll run any code that includes
<code>input$sorted_column</code> <em>again</em>. The logic for this
holds up: If <code>input$sorted_column</code> has changed, any outputs
produced using its previous value as an input may now be “outdated,” so
re-running the associated code and producing new outputs makes
sense!</p>
<p>Because the code inside <code>renderTable({})</code> contains
<code>input$sorted_column</code>, that code will re-run every time
<code>input$sorted_column</code> changes, which happens every time the
user selects a new column from the drop-down menu. We’re successfully
<strong>handling</strong> <strong>events</strong> triggered by our
user’s interactions with our input widget!</p>
</div>
<div class="section level3">
<h3 id="reactivity">Reactivity<a class="anchor" aria-label="anchor" href="#reactivity"></a></h3>
<p>There is just one small but important technical detail: Shiny
<em>can’t</em> watch for changes in <strong>reactive objects</strong>
<em>everywhere</em>—it can <em>only</em> do so within <strong>reactive
contexts</strong>. A <strong>reactive context</strong> is a code block
that R <em>knows</em> to watch for changes because reactive objects can
be there and those might change. It makes sense that we can only put
these kinds of “changeable” objects inside code blocks that R knows
might contain such objects!</p>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p><strong>Try it:</strong> Pause here to prove the previous point. Copy
<code>input$sorted_column</code> and paste it anywhere <em>inside</em>
your server function but <em>outside</em> of
<code>renderTable({})</code>’s braces. Then, run your app. It should
<strong>immediately</strong> crash! Note the R error that prints in your
R Console when it does; rephrase that error messages in your own
words.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>You’ll get an error that looks like this:<br><br><code>Error in $: Can't access reactive value 'sorted_column' outside of reactive consumer. ℹ Do you need to wrap inside reactive() or observe()?</code></p>
<p>This error notes that <code>input$sorted_column</code> is a
<strong>reactive object</strong> (R is calling it a reactive value; the
distinction isn’t important) and that you’ve tried to reference it
outside of a reactive context (R is calling it a reactive consumer,
which is also not an important distinction). R is not prepared to be
watching for such an object in the place we’ve put it.</p>
</div>
</div>
</div>
</div>
<p>How do we recognize reactive contexts so we know where we can and
can’t put entities like <code>input$sorted_column</code>? <em>Generally
speaking</em>, when an R Shiny server-side function takes, as an input,
an <strong>expression</strong> bounded by braces ( <code>{}</code> ),
that expression becomes a reactive context (this isn’t <em>strictly</em>
true, as we’ll soon see, but it’s a good first assumption).</p>
<p>Maybe you’ve noticed the curly braces inside
<code>renderTable({})</code> and wondered what they’re for? <em>The main
input to every <code>render*()</code> function is an
<strong>expression</strong> for creating a <strong>reactive
context</strong>!</em></p>
<p>That means R <em>assumes</em> that every complex element we render
server-side might need to be <em>re-rendered</em> because the user
changes something. The code we provide to <code>renderTable({})</code>
is treated as a general set of instructions for how to <em>handle</em>
changing values of <code>input$sorted_column</code>, no matter what new
value gets picked or when. And the solution Shiny uses in those cases
will always be “re-run this expression.”</p>
</div>
</section><section><h2 class="section-heading" id="how-r-shiny-differs-from-normal-r">How R Shiny differs from “normal R”<a class="anchor" aria-label="anchor" href="#how-r-shiny-differs-from-normal-r"></a></h2>
<hr class="half-width"><p>You’re hopefully realizing that coding in R Shiny (on both the UI and
server sides) is different from coding in “normal R” in some key
ways.</p>
<p>For many regular R users, the “nestedness” of UI code probably feels
strange (it <em>should</em>—we’re really writing thinly veiled HTML!).
Meanwhile, server-side, having to anticipate ways users <em>might</em>
interact with our app and then code generalized instructions for how the
app should respond, no matter when or under what circumstances, also
probably feels strange.</p>
<p>It <em>should</em>—<em>R Shiny server code is not like normal R code!
In fact, it’s an entirely different paradigm of programming than the one
you might be most familiar with.</em> Normal R code is generally
executed <strong>imperatively</strong>. That is, it is run from the
first command provided to the last one, as fast as possible, as soon as
we (the user) hit “run.”</p>
<p>Server-side Shiny code, meanwhile, is executed
<strong>declaratively</strong>. That is, it generally runs once when the
app starts up, but, after that, it never runs again <em>unless</em> and
<em>until</em> it is <em>triggered</em> to run by one or more specific
<strong>events</strong>.</p>
<p>[Caveat: The above is true when R is deciding which reactive contexts
to run and when; however, the R code <em>within</em> those contexts
still runs imperatively, once the reactive context it’s within is chosen
to run.]</p>
<p>These two different paradigms can be compared with an analogy:
Imagine you are in a sandwich shop ordering a sandwich. You probably
expect the employees to begin making your sandwich as soon after you’ve
place your order as possible, based on particulars you’ve specified
(what you want to order). In that analogy, the relationship between you
and the shop is <strong>imperative</strong>; you gave a “command” and
the sandwich shop “executed” that command as quickly as it could based
on the inputs you’ve provided.</p>
<p>Meanwhile, the relationship between the shop’s manager and their
employees is <strong>declarative</strong>. The manager can’t know which
customers will come in on a given day, when those customers will show
up, or which sandwiches they’ll order. So, they can’t give their
employees precise “commands” and specific instructions of when to
execute them or in what order. Instead, they have to tell their
employees to “watch for customers” and, when those customers arrive and
place orders, they should use a generalized set of guidelines to handle
whatever orders have been placed with whatever inputs were provided.</p>
<p>As web developers, our relationship with our users is similar. We
can’t know who will show up and what <em>exactly</em> they might decide
to do and when. However, we <em>can</em> anticipate actions they might
be likely to take (in fact, we can steer them towards specific actions
with our design!) and then give the app generalized enough instructions
that it can take care of all those different requests whenever (or if
ever) they occur.</p>
<p>Another way to think about this distinction between imperative
evaluation in R and directive evaluation in R Shiny is that, in the
former, <em>you</em> are the user, and you are present <em>now</em>, so
R should strive to meet your needs <em>immediately</em>, and you can be
highly precise about what those needs are and how they should be met. In
the latter, though, your users are the visitors to your website, and
even though you’re writing the code for your website now, its
<em>users</em> won’t arrive until <em>later</em>. So, your code needs to
let R know what it should do later on, when you’re not around, but your
users are.</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion</h3>
<div class="callout-content">
<p><strong>Check for understanding:</strong> How does the code we’ve
written so far in our <code>server.R</code> file execute differently
than code we’d write in a traditional R script? How does the code inside
of <code>renderTable({})</code>’s braces differ from traditional R code
we might write?</p>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Server-side R code is broken up into many commands that create
reactive contexts, each of which is tasked with generating one or more
complex UI elements and/or handling user actions. Unlike traditional R
code, these reactive contexts execute not when we hit “run” but instead
when a user performs a triggering action. So, they each might run many
times, or once when the app starts and then never again.</p>
<p>Plus, reactive contexts will (re)-run based on user actions,
<em>not</em> based on their placement within the file. So, your
server-side will often run in an “order” very different than the
“top-down” order we usually expect R code to run in.</p>
<p><em>Inside</em> a reactive context, meanwhile, things are more
traditional; code inside a reactive context will run just once, from top
to bottom, as quickly as possible, as soon as that context is triggered
to (re)run. However, the difference is that these contexts might contain
reactive objects whose values might frequently change, so our code needs
to be set up to accommodate any potential value they may take.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="buttoning-this-up">Buttoning this up<a class="anchor" aria-label="anchor" href="#buttoning-this-up"></a></h2>
<hr class="half-width"><p>By this point, R now knows that:</p>
<ol style="list-style-type: decimal"><li><p>Users might select new columns in our input widget
(<strong>events</strong>),</p></li>
<li><p>It should watch out for any such events, specifically those
affecting reactive objects (like <code>input$sorted_column</code>)
inside of <code>renderTable({})</code>’s reactive context, and</p></li>
<li><p>If any events occur, it should re-execute the code inside
<code>renderTable({})</code>’s braces, re-generating the table in line
with the generalized instructions we’ve provided, including those that
influence how the table is sorted.</p></li>
</ol><p>In this circumstance (a simple table that users can adjust via just
one input widget), this setup is <em>probably</em> fine.</p>
<p>However, imagine that users have access to several input widgets
instead of one. If we used this same approach to handle events from all
those inputs, a user adjusting any one input would trigger the table
re-rendering process.</p>
<p>That might make our table <em>undesirably</em> reactive! Users often
expect to have a say in when <em>exactly</em> an app changes states.
Maybe they expect to be able to experiment with all available widgets to
find the <em>combination</em> of selections they are most interested in.
Maybe the table loads slowly, so users would prefer not to wait through
the rebuilding process until they’re “ready.” Maybe some users just want
to be “in control” because they’d find the updating process distracting
when it happens not on <em>their</em> terms.</p>
<p>In any case, we can give users greater control by adding another
input widget: an <code>actionButton()</code>.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="do">##This code should **replace** the "sidebar" cell contained within the main fluidRow() of your ui.R file!</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="do">##... other UI code...</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="do">###SIDEBAR CELL</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>    <span class="fu">column</span>(</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>      <span class="at">width =</span> <span class="dv">4</span>,</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>      <span class="fu">selectInput</span>(</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>        <span class="at">inputId =</span> <span class="st">"sorted_column"</span>,</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">"Select a column to sort the table by."</span>,</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>          <span class="st">"Country"</span> <span class="ot">=</span> <span class="st">"country"</span>,</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>          <span class="st">"Continent"</span> <span class="ot">=</span> <span class="st">"continent"</span>,</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>          <span class="st">"Year"</span> <span class="ot">=</span> <span class="st">"year"</span>,</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a>          <span class="st">"Life expectancy"</span> <span class="ot">=</span> <span class="st">"lifeExp"</span>,</span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a>          <span class="st">"Population size"</span> <span class="ot">=</span> <span class="st">"pop"</span>,</span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>          <span class="st">"GDP per capita"</span> <span class="ot">=</span> <span class="st">"gdpPercap"</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a>        )</span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a>      ),</span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a>      <span class="do">##ADD AN actionButton(). PAY </span><span class="al">ATTENTION</span><span class="do"> TO COMMAS/PARENTHESES AROUND THIS NEW CODE!</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a>      <span class="fu">actionButton</span>(<span class="at">inputId =</span> <span class="st">"go_button"</span>, <span class="at">label =</span> <span class="st">"Go!"</span>)</span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a>    ),</span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a>  </span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="do">##... other UI code...</span></span></code></pre>
</div>
<p>The code we’ve added above adds a simple, button-style widget to our
app’s sidebar. It says <code>Go!</code> on it (<code>label</code>), and
it’s current value (a number equal to the number of times it’s been
pressed, or <code>NULL</code> if it hasn’t been pressed yet) will be
passed from the UI to the server via <code>input$go_button</code>.</p>
<figure><img src="fig/go%20button.png" alt="A new “Go” button has been added to our app’s sidebar panel." class="figure mx-auto d-block"><div class="figcaption">A new “Go” button has been added to our app’s
sidebar panel.</div>
</figure><p>Now, we need to tell R how to <strong>handle</strong> presses of our
button (until then, pressing it won’t do anything!).</p>
<p>Here, we want the table to update <em>only</em> whenever the button
is pressed (<em>i.e.</em>, whenever <code>input$go_button</code>’s value
changes). We also no longer want changes to
<code>input$sorted_column</code> to cause the table to update.</p>
<p>Here’s where we hit a snag: <code>renderTable({})</code>’s reactive
context is “indiscriminate;” <em>any</em> change in <em>any</em>
reactive object it contains will trigger the reactive context to rerun.
So, simply adding <code>input$go_button</code> to that reactive context
will <em>not</em> prevent changes in <code>input$sorted_column</code>
from triggering a rerun too. But we can’t just remove
<code>input$sorted_column</code> from the reactive context because,
then, we couldn’t use its current value to decide what column to sort by
when we the context does re-run.</p>
<p>Are we stuck? No. Thankfully, Shiny has a function for these kinds of
situations: <code>isolate()</code>. Wrapping any reactive object with
<code>isolate()</code> allows R to use that object’s current value to do
work, but that object loses its ability to trigger events in that
context.</p>
<p>Here’s how we can use <code>isolate()</code> to achieve the desired
outcome:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##This code should **replace** the renderTable({}) call contained within your server.R file!</span></span>
<span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">basic_table</span> <span class="op">=</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="co">#SIMPLY BY PLACING input$go_button ANYWHERE INSIDE THIS REACTIVE EXPRESSION (EVEN IF IT'S VALUE IS NOT USED IN ANY MEANINGFUL WAY), THIS REACTIVE CONTEXT WILL RE-RUN EVERY TIME input$go_button CHANGES. </span></span>
<span>  <span class="va">input</span><span class="op">$</span><span class="va">go_button</span></span>
<span>  </span>
<span>  <span class="co">#USING isolate() PREVENTS input$sorted_column FROM TRIGGERING EVENTS, BUT STILL ALLOWS US TO USE ITS CURRENT VALUE TO DO WORK.</span></span>
<span>  <span class="va">gap</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">arrange</span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu">sym</span><span class="op">(</span><span class="fu">isolate</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">sorted_column</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span>  </span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre>
</div>
<p>Now, when users fiddle with the drop-down widget, nothing
happens…<em>until</em> they press the button. Then, and only then, does
the table re-render, using their <em>most recent selection</em> in the
drop-down as an input to that process.</p>
<figure><img src="fig/go%20button%20works.gif" alt="Thanks to isolate(), our table only re-renders when the “Go” button is pressed, but the drop-down menu’s current value is still used at that time." class="figure mx-auto d-block"><div class="figcaption">Thanks to isolate(), our table only re-renders
when the “Go” button is pressed, but the drop-down menu’s current value
is still used at that time.</div>
</figure></section><section><h2 class="section-heading" id="being-observant">Being observant<a class="anchor" aria-label="anchor" href="#being-observant"></a></h2>
<hr class="half-width"><p>This approach works just fine in this simplistic situation. It can
get unwieldy, however, if you have <em>many</em> inputs you’d need to
find and isolate inside a complex reactive context.</p>
<p>For situations in which you want your app to respond in a
<em>specific</em> way <em>only</em> when a single <em>specific</em>
reactive object changes, especially when the response involves a bunch
of other reactive objects you <em>don’t</em> want to trigger events, we
can make our event handling more precise using
<code>observeEvent({},{})</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##This code should **replace** the renderTable({}) call contained within your server.R file!</span></span>
<span></span>
<span><span class="co">#FIRST, WE REDUCE OUR renderTable({}) CALL BACK TO ITS BASIC FORM SO IT PRODUCE THE DEFAULT VERSION OF OUR TABLE WHEN THE APP STARTS. THIS CODE WILL NEVER RUN AGAIN THEREAFTER BECAUSE IT CONTAINS NO REACTIVE OBJECTS.</span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">basic_table</span> <span class="op">=</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">gap</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#NEXT, WE CREATE AN OBSERVER TO WATCH FOR EVENTS AND TO UPDATE THAT DEFAULT TABLE.</span></span>
<span><span class="co">#observeEvent({},{}) TAKES TWO EXPRESSIONS. IT WATCHES THE FIRST FOR EVENTS AND, WHEN IT SPOTS ONE, RESPONDS BY RUNNING THE SECOND. </span></span>
<span><span class="co">#SO, ONLY THE **FIRST** EXPRESSION IS REACTIVE, BUT ONLY THE **SECOND** EVER RUNS!</span></span>
<span><span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">go_button</span>, <span class="op">{</span> </span>
<span></span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">basic_table</span> <span class="op">=</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">gap</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">arrange</span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu">sym</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">sorted_column</span><span class="op">)</span><span class="op">)</span> <span class="co">#NO NEED FOR isolate() ANY LONGER</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre>
</div>
<p>If you restart your app having made the adjustments above to your
server code, you will be able to confirm that the app works exactly the
same as before, showing that both approaches work to accomplish the same
goal.</p>
<p>Note that we wrote <code>observeEvent({},{})</code> with <em>two</em>
sets of braces. That’s because we give it, as inputs, <em>two</em>
<strong>expressions</strong>. These have a particular relationship:</p>
<ol style="list-style-type: decimal"><li><p>R watches <em>only</em> the <em>first</em> for events (it’s the
only <strong>reactive</strong> <strong>expression</strong> of the
two).</p></li>
<li>
<p>R only ever <strong>executes</strong> the <em>second</em>
expression, and <em>only</em> due to changes in the <em>first</em>).</p>
<ul><li>In a sense, it’s like the <em>entire</em> second expression has been
<code>isolate()</code>d, and the <em>entire</em> first expression has
been “muted” in that it can’t produce outputs!</li>
</ul></li>
</ol><p>So, <code>observeEvent({},{})</code> is the equivalent of telling R
“if [first expression] changes, do [second expression],” a level of
precision in our event handling that we very often want! It’s for this
reason I use <code>observeEvent({},{}</code> often in my apps—they make
an app’s responses to user actions much more predictable than other
approaches.</p>
</section><section><h2 class="section-heading" id="totally-tabular">Totally tabular<a class="anchor" aria-label="anchor" href="#totally-tabular"></a></h2>
<hr class="half-width"><p>We now have all the conceptual tools to build a really cool app! In
the next lesson, we’ll replace our current table with a cooler one, and
we’ll add map and graph widgets too. To keep all this new content
organized, let’s add <strong>tabs</strong> to our main panel, one for
each complex interactive feature.</p>
<p>We can do this using the Shiny functions <code>tabsetPanel()</code>,
which creates a box to hold all the tabs, and <code>tabPanel()</code>,
which creates a box for the contents of one tab:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="do">##This code should **replace** the content of the "main panel" cell within the BODY section of your ui.R file!</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="do">##... other UI code...</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="do">###MAIN PANEL CELL</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="do">##NEST UI ELEMENTS HERE **CAREFULLY**!</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>    <span class="fu">column</span>(<span class="at">width =</span> <span class="dv">8</span>, </span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>     <span class="fu">tabsetPanel</span>(</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>      <span class="do">###TABLE TAB</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>      <span class="fu">tabPanel</span>(<span class="at">title =</span> <span class="st">"Table"</span>, </span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>               <span class="fu">tableOutput</span>(<span class="st">"basic_table"</span>)),<span class="co">#RELOCATE THE TABLE INTO THIS NEW TAB.</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>      <span class="do">###MAP TAB</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>      <span class="fu">tabPanel</span>(<span class="at">title =</span> <span class="st">"Map"</span>),</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>      <span class="do">###GRAPH TAB</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>      <span class="fu">tabPanel</span>(<span class="at">title =</span> <span class="st">"Graph"</span>)</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>     )</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>    ),</span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a><span class="do">##... other UI code...</span></span></code></pre>
</div>
<p>Now, if we look at our app, we’ll see we have three tabs in our main
panel area, with <code>title</code>s in their tab headings that we
provided in our UI code:</p>
<figure><img src="fig/new%20tabset%20.png" alt="We’ve split our “main panel” cell into three tabs using a tabsetPanel()." class="figure mx-auto d-block"><div class="figcaption">We’ve split our “main panel” cell into three
tabs using a tabsetPanel().</div>
</figure><p>We can swap between tabs using each tab panel’s tab (the terminology
here is awkward!), just like in a browser. The second and third tab
panels are currently empty, but not for long! We’ll add new features to
them in the next lesson.</p>
<div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion</h3>
<div class="callout-content">
<p>Imagine you have two <strong>observers</strong> that are watching the
same <strong>reactive object</strong> such that, when that reactive
object changes, both observers should begin to execute. What do you
think will happen?</p>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>In complex applications, the scenario described here is
<em>surprisingly</em> common, and it can actually be a problem!</p>
<p>In Shiny, both observers would <strong>invalidate</strong>, meaning
they have both been “scheduled” to re-run. Shiny then selects to re-run
one of them first (somewhat arbitrarily) and allows it to finish
completely before allowing the next one to re-run. Shiny does not (by
default) allow observers to run at the same time (“in parallel”), so
they will always run in some sequence instead.</p>
<p>If the two observers have completely independent roles, this
circumstance is maybe fine. However, if the observers depend upon one
another (<em>e.g.</em>, observer 1 is meant to use up-to-date outputs
from observer 2’s operations), then the order in which the observers run
matters. If observer 1 runs first, it may use outdated inputs.</p>
<p>When the exact order in which observers )or other <strong>reactive
contexts</strong>) re-run matters, developers refer to this as a
<strong>race condition</strong>, as though the two reactive contexts are
“racing” each other. Race conditions are a common source of bugs in
<strong>directive evaluation</strong> contexts.</p>
<p>While it’s best to design apps such that observers are independent or
don’t need to watch the same reactive objects, it’s sometimes
unavoidable. In those instances, <code>observeEvent({},{})</code>’s
<code>priority</code> parameter can be used—R will use the values
specified to <code>priority</code> to decide the order “racing”
observers should execute in-.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul><li>Complex UI elements, like tables, first need to be
<strong>rendered</strong> server-side using a <code>render*({})</code>
function and then placed within our UI using an <code>*Output()</code>
function.</li>
<li>Rendered entities are passed from the server to the UI via the
<code>output</code> object using the <code>outputId</code>s we provided
them when we <strong>rendered</strong> them.</li>
<li>
<strong>Input widgets</strong> are UI elements that allow users to
interact with our app in pre-defined and familiar ways. The current
values of these widgets are passed from the UI to the server via the
<code>input</code> object using the <code>inputId</code>s we provided
them when we created them.</li>
<li>R knows to watch <strong>reactive objects</strong> (like those
attached to <code>input</code>) for changes. Any such changes are
<strong>events</strong>. <strong>Event handling</strong> is coding how
the app should respond to an event.</li>
<li>The primary way Shiny handles events is by re-running any
<strong>reactive contexts</strong> containing the reactive object(s)
that just changed (unless those objects have been
<code>isolate()</code>d, in which case they can’t trigger events but
they can be used in operations).</li>
<li>Server-side, reactive contexts are triggered to run
<strong>directively</strong> (when a precipitating event occurs), not
<strong>imperatively</strong> (when a coder hits “run”). They might run
in any order, many times, or never—it all depends on what the user
does.</li>
<li>However, <em>once</em> a reactive context begins executing, its
contents are executed imperatively, like “normal,” until they complete
(even if that takes a long time!), during which time the app will be
unresponsive.</li>
<li>
<strong>Observers</strong> (like <code>observeEvent({},{})</code>)
allow for more precise event-handling; <code>observeEvent({},{})</code>s
only rerun their second expression and only in response to events that
occur in their first expression, so they enable precise “If X, then Y”
event handling.</li>
<li>
<code>tabPanel()</code> and <code>tabsetPanel()</code> create a
“tabular layout,” dividing one UI space into several, only one of which
is visible at a time.</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="shiny_2.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="shiny_4.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="shiny_2.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Building the Ground
        </a>
        <a class="chapter-link float-end" href="shiny_4.html" rel="next">
          Next: Shiny Showstoppers:...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries/r_shiny_workshop/edit/main/episodes/shiny_3.Rmd" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries/r_shiny_workshop/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries/r_shiny_workshop/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries/r_shiny_workshop/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.7" class="external-link">sandpaper (0.16.7)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.4" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://carpentries.github.io/r_shiny_workshop/shiny_3.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, r, The Carpentries",
  "name": "R Shiny's Core Concepts: Rendering and Outputting, Input Widgets, and Reactivity",
  "creativeWorkStatus": "active",
  "url": "https://carpentries.github.io/r_shiny_workshop/shiny_3.html",
  "identifier": "https://carpentries.github.io/r_shiny_workshop/shiny_3.html",
  "dateCreated": "2024-07-10",
  "dateModified": "2024-09-05",
  "datePublished": "2024-09-10"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

